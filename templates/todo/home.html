{% extends 'base.html' %}
{% block content %}
<div class="mt-3">
  <div class="d-flex justify-content-between align-items-center">
    <h1 class="mb-0">Todo List</h1>
    <a href="/add_task/" class="btn btn-primary">Add task</a>
  </div>
  {% for task in tasks %}
    <div class="card mt-3">
      <div class="card-body">
        <h5 class="card-title d-flex justify-content-between align-items-center">
          {{ task.content }}
          <div>
            <a href="/update_task/{{ task.id }}" class="btn btn-link">Update</a>
            <a href="/delete_task/{{ task.id }}" class="btn btn-link text-danger">Delete</a>
            {% if task.is_done %}
              <a href="/undo_task/{{ task.id }}" class="btn btn-secondary">Undo</a>
            {% else %}
              <a href="/complete_task/{{ task.id }}" class="btn btn-success">Complete</a>
            {% endif %}
          </div>
        </h5>
        <div class="card-subtitle mb-2 text-muted">{{ task.created_at }}</div>
          <p class="card-text">Deadline: {{ task.deadline }}</p>
          <p class="card-text">Tags:
            {% for tag in task.tags.all %}
              {{ tag.name }}
            {% empty %}
              No tags.
            {% endfor %}
          </p>
      </div>
    </div>
    {% empty %}
    <p>No tasks yet.</p>
    {% endfor %}
</div>
{% endblock %}
